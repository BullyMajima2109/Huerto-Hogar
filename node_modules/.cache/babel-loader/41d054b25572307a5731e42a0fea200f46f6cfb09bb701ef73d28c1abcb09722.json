{"ast":null,"code":"import _objectSpread from\"C:/Users/jorda/OneDrive/Escritorio/William/huerto-hogar-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/App.js\nimport{useEffect,useState}from'react';import{Container,Row,Col,Navbar,Nav,Button}from'react-bootstrap';import{Routes,Route,useNavigate,Navigate}from'react-router-dom';import ProductList from'./components/ProductList';import ShoppingCart from'./components/ShoppingCart';import CheckoutPage from'./components/CheckoutPage';import Login from'./components/Login';import Register from'./components/Register';import AdminPanel from'./components/AdminPanel';import ProtectedRoute from'./components/ProtectedRoute';import{isAuthenticated,getUser,logout,isAdmin}from'./services/authService';import{ordenesAPI}from'./services/api';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const CART_KEY='hh_cart_v1';function normalizeCartItems(items){if(!Array.isArray(items)){return[];}return items.map(item=>{var _ref,_item$key,_item$id,_item$productoId;if(!item)return null;const keySource=(_ref=(_item$key=item.key)!==null&&_item$key!==void 0?_item$key:item.id)!==null&&_ref!==void 0?_ref:item.productoId;if(!keySource||!item.name||typeof item.price!=='number'){return null;}return{key:String(keySource),id:(_item$id=item.id)!==null&&_item$id!==void 0?_item$id:null,productoId:(_item$productoId=item.productoId)!==null&&_item$productoId!==void 0?_item$productoId:null,name:item.name,unit:item.unit||'',price:item.price,img:item.img||'',qty:Math.max(1,Number(item.qty)||1)};}).filter(Boolean);}function loadCart(){try{const raw=window.localStorage.getItem(CART_KEY);if(!raw)return[];const parsed=JSON.parse(raw);const normalized=normalizeCartItems(parsed);if(Array.isArray(parsed)&&normalized.length!==parsed.length){saveCart(normalized);}return normalized;}catch(_unused){return[];}}function saveCart(cart){try{window.localStorage.setItem(CART_KEY,JSON.stringify(cart));}catch(_unused2){// ignorar errores de localStorage\n}}export default function App(){const navigate=useNavigate();const[cart,setCart]=useState(()=>loadCart());const[user,setUser]=useState(()=>getUser());const[authChecked,setAuthChecked]=useState(false);// Verificar autenticaci贸n al cargar\nuseEffect(()=>{const currentUser=getUser();setUser(currentUser);setAuthChecked(true);},[]);useEffect(()=>{saveCart(cart);},[cart]);const handleAddToCart=product=>{var _product$id;if(!product)return;const keySource=(_product$id=product.id)!==null&&_product$id!==void 0?_product$id:product.productoId;if(!keySource)return;const key=String(keySource);setCart(prev=>{var _product$id2,_product$productoId,_product$name,_product$unit,_product$img;const index=prev.findIndex(item=>item.key===key);if(index>=0){const updated=[...prev];updated[index]=_objectSpread(_objectSpread({},updated[index]),{},{qty:updated[index].qty+1});return updated;}return[...prev,{key,id:(_product$id2=product.id)!==null&&_product$id2!==void 0?_product$id2:null,productoId:(_product$productoId=product.productoId)!==null&&_product$productoId!==void 0?_product$productoId:null,name:(_product$name=product.name)!==null&&_product$name!==void 0?_product$name:'Producto',unit:(_product$unit=product.unit)!==null&&_product$unit!==void 0?_product$unit:'',price:typeof product.price==='number'?product.price:0,img:(_product$img=product.img)!==null&&_product$img!==void 0?_product$img:'',qty:1}];});};const handleRemoveFromCart=key=>{setCart(prev=>prev.filter(item=>item.key!==key));};const handleClearCart=()=>{setCart([]);};const handleUpdateQty=(key,newQty)=>{setCart(prev=>prev.map(item=>item.key===key?_objectSpread(_objectSpread({},item),{},{qty:Math.max(1,newQty)}):item));};const goToCheckout=()=>{if(!isAuthenticated()){navigate('/login');return;}navigate('/checkout');};const handleConfirmPurchase=async orderId=>{alert(\"Compra confirmada.\\nBoleta: \".concat(orderId));setCart([]);navigate('/');};const goBackToCatalog=()=>{navigate('/');};const handleLogin=()=>{setUser(getUser());};const handleLogout=()=>{logout();setUser(null);setCart([]);navigate('/');};if(!authChecked){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-4\",children:\"Cargando...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{bg:\"light\",expand:\"lg\",className:\"mb-4\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"/\",children:\"\\uD83C\\uDF31 Huerto Hogar\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"basic-navbar-nav\",children:[/*#__PURE__*/_jsxs(Nav,{className:\"me-auto\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/\",children:\"Productos\"}),isAuthenticated()&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/mis-ordenes\",children:\"Mis \\xD3rdenes\"}),isAdmin()&&/*#__PURE__*/_jsx(Nav.Link,{href:\"/admin\",children:\"Administraci\\xF3n\"})]})]}),/*#__PURE__*/_jsx(Nav,{children:isAuthenticated()?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Navbar.Text,{className:\"me-3\",children:[\"\\uD83D\\uDC64 \",user===null||user===void 0?void 0:user.nombre,\" \",user===null||user===void 0?void 0:user.apellido]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",size:\"sm\",onClick:handleLogout,children:\"Cerrar Sesi\\xF3n\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",className:\"me-2\",onClick:()=>navigate('/login'),children:\"Iniciar Sesi\\xF3n\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"sm\",onClick:()=>navigate('/register'),children:\"Registrarse\"})]})})]})]})}),/*#__PURE__*/_jsx(Container,{className:\"mt-4\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated()?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:isAuthenticated()?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Register,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,lg:9,children:/*#__PURE__*/_jsx(ProductList,{onAddToCart:handleAddToCart})}),/*#__PURE__*/_jsx(Col,{md:4,lg:3,children:/*#__PURE__*/_jsx(ShoppingCart,{cart:cart,onRemove:handleRemoveFromCart,onClear:handleClearCart,onUpdateQty:handleUpdateQty,onCheckout:goToCheckout})})]})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(CheckoutPage,{cart:cart,onBack:goBackToCatalog,onConfirm:handleConfirmPurchase})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{requireRole:\"ROLE_ADMIN\",children:/*#__PURE__*/_jsx(AdminPanel,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/mis-ordenes\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(MisOrdenes,{})})})]})})]});}// Componente para mostrar las 贸rdenes del usuario\nfunction MisOrdenes(){const[ordenes,setOrdenes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{loadOrdenes();},[]);const loadOrdenes=async()=>{try{setLoading(true);const data=await ordenesAPI.getMisOrdenes();setOrdenes(data);}catch(err){setError('Error al cargar 贸rdenes');}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center p-4\",children:\"Cargando \\xF3rdenes...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Mis \\xD3rdenes\"}),ordenes.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:\"No tienes \\xF3rdenes a\\xFAn.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"list-group\",children:ordenes.map(orden=>/*#__PURE__*/_jsx(\"div\",{className:\"list-group-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Orden #\",orden.numeroOrden]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[\"Estado: \",/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-info\",children:orden.estado})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[\"Fecha: \",new Date(orden.fechaCreacion).toLocaleString('es-CL')]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end\",children:/*#__PURE__*/_jsxs(\"h5\",{children:[\"Total: $\",orden.total.toLocaleString('es-CL')]})})]})},orden.id))})]});}","map":{"version":3,"names":["useEffect","useState","Container","Row","Col","Navbar","Nav","Button","Routes","Route","useNavigate","Navigate","ProductList","ShoppingCart","CheckoutPage","Login","Register","AdminPanel","ProtectedRoute","isAuthenticated","getUser","logout","isAdmin","ordenesAPI","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CART_KEY","normalizeCartItems","items","Array","isArray","map","item","_ref","_item$key","_item$id","_item$productoId","keySource","key","id","productoId","name","price","String","unit","img","qty","Math","max","Number","filter","Boolean","loadCart","raw","window","localStorage","getItem","parsed","JSON","parse","normalized","length","saveCart","_unused","cart","setItem","stringify","_unused2","App","navigate","setCart","user","setUser","authChecked","setAuthChecked","currentUser","handleAddToCart","product","_product$id","prev","_product$id2","_product$productoId","_product$name","_product$unit","_product$img","index","findIndex","updated","_objectSpread","handleRemoveFromCart","handleClearCart","handleUpdateQty","newQty","goToCheckout","handleConfirmPurchase","orderId","alert","concat","goBackToCatalog","handleLogin","handleLogout","className","children","bg","expand","Brand","href","Toggle","Collapse","Link","Text","nombre","apellido","variant","size","onClick","path","element","to","replace","onLogin","md","lg","onAddToCart","onRemove","onClear","onUpdateQty","onCheckout","onBack","onConfirm","requireRole","MisOrdenes","ordenes","setOrdenes","loading","setLoading","error","setError","loadOrdenes","data","getMisOrdenes","err","orden","numeroOrden","estado","Date","fechaCreacion","toLocaleString","total"],"sources":["C:/Users/jorda/OneDrive/Escritorio/William/huerto-hogar-react/src/App.js"],"sourcesContent":["// src/App.js\nimport { useEffect, useState } from 'react';\nimport { Container, Row, Col, Navbar, Nav, Button } from 'react-bootstrap';\nimport { Routes, Route, useNavigate, Navigate } from 'react-router-dom';\nimport ProductList from './components/ProductList';\nimport ShoppingCart from './components/ShoppingCart';\nimport CheckoutPage from './components/CheckoutPage';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport AdminPanel from './components/AdminPanel';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport { isAuthenticated, getUser, logout, isAdmin } from './services/authService';\nimport { ordenesAPI } from './services/api';\n\nconst CART_KEY = 'hh_cart_v1';\n\nfunction normalizeCartItems(items) {\n  if (!Array.isArray(items)) {\n    return [];\n  }\n\n  return items\n    .map((item) => {\n      if (!item) return null;\n      const keySource = item.key ?? item.id ?? item.productoId;\n      if (!keySource || !item.name || typeof item.price !== 'number') {\n        return null;\n      }\n\n      return {\n        key: String(keySource),\n        id: item.id ?? null,\n        productoId: item.productoId ?? null,\n        name: item.name,\n        unit: item.unit || '',\n        price: item.price,\n        img: item.img || '',\n        qty: Math.max(1, Number(item.qty) || 1),\n      };\n    })\n    .filter(Boolean);\n}\n\nfunction loadCart() {\n  try {\n    const raw = window.localStorage.getItem(CART_KEY);\n    if (!raw) return [];\n    const parsed = JSON.parse(raw);\n    const normalized = normalizeCartItems(parsed);\n\n    if (Array.isArray(parsed) && normalized.length !== parsed.length) {\n      saveCart(normalized);\n    }\n\n    return normalized;\n  } catch {\n    return [];\n  }\n}\n\nfunction saveCart(cart) {\n  try {\n    window.localStorage.setItem(CART_KEY, JSON.stringify(cart));\n  } catch {\n    // ignorar errores de localStorage\n  }\n}\n\nexport default function App() {\n  const navigate = useNavigate();\n  const [cart, setCart] = useState(() => loadCart());\n  const [user, setUser] = useState(() => getUser());\n  const [authChecked, setAuthChecked] = useState(false);\n\n  // Verificar autenticaci贸n al cargar\n  useEffect(() => {\n    const currentUser = getUser();\n    setUser(currentUser);\n    setAuthChecked(true);\n  }, []);\n\n  useEffect(() => {\n    saveCart(cart);\n  }, [cart]);\n\n  const handleAddToCart = (product) => {\n    if (!product) return;\n\n    const keySource = product.id ?? product.productoId;\n    if (!keySource) return;\n    const key = String(keySource);\n\n    setCart((prev) => {\n      const index = prev.findIndex((item) => item.key === key);\n      if (index >= 0) {\n        const updated = [...prev];\n        updated[index] = {\n          ...updated[index],\n          qty: updated[index].qty + 1,\n        };\n        return updated;\n      }\n\n      return [\n        ...prev,\n        {\n          key,\n          id: product.id ?? null,\n          productoId: product.productoId ?? null,\n          name: product.name ?? 'Producto',\n          unit: product.unit ?? '',\n          price: typeof product.price === 'number' ? product.price : 0,\n          img: product.img ?? '',\n          qty: 1,\n        },\n      ];\n    });\n  };\n\n  const handleRemoveFromCart = (key) => {\n    setCart((prev) => prev.filter((item) => item.key !== key));\n  };\n\n  const handleClearCart = () => {\n    setCart([]);\n  };\n\n  const handleUpdateQty = (key, newQty) => {\n    setCart((prev) =>\n      prev.map((item) =>\n        item.key === key\n          ? { ...item, qty: Math.max(1, newQty) }\n          : item\n      )\n    );\n  };\n\n  const goToCheckout = () => {\n    if (!isAuthenticated()) {\n      navigate('/login');\n      return;\n    }\n    navigate('/checkout');\n  };\n\n  const handleConfirmPurchase = async (orderId) => {\n    alert(`Compra confirmada.\\nBoleta: ${orderId}`);\n    setCart([]);\n    navigate('/');\n  };\n\n  const goBackToCatalog = () => {\n    navigate('/');\n  };\n\n  const handleLogin = () => {\n    setUser(getUser());\n  };\n\n  const handleLogout = () => {\n    logout();\n    setUser(null);\n    setCart([]);\n    navigate('/');\n  };\n\n  if (!authChecked) {\n    return <div className=\"text-center p-4\">Cargando...</div>;\n  }\n\n  return (\n    <>\n      <Navbar bg=\"light\" expand=\"lg\" className=\"mb-4\">\n        <Container>\n          <Navbar.Brand href=\"/\"> Huerto Hogar</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"me-auto\">\n              <Nav.Link href=\"/\">Productos</Nav.Link>\n              {isAuthenticated() && (\n                <>\n                  <Nav.Link href=\"/mis-ordenes\">Mis rdenes</Nav.Link>\n                  {isAdmin() && (\n                    <Nav.Link href=\"/admin\">Administraci贸n</Nav.Link>\n                  )}\n                </>\n              )}\n            </Nav>\n            <Nav>\n              {isAuthenticated() ? (\n                <>\n                  <Navbar.Text className=\"me-3\">\n                     {user?.nombre} {user?.apellido}\n                  </Navbar.Text>\n                  <Button variant=\"outline-danger\" size=\"sm\" onClick={handleLogout}>\n                    Cerrar Sesi贸n\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <Button\n                    variant=\"outline-primary\"\n                    size=\"sm\"\n                    className=\"me-2\"\n                    onClick={() => navigate('/login')}\n                  >\n                    Iniciar Sesi贸n\n                  </Button>\n                  <Button\n                    variant=\"primary\"\n                    size=\"sm\"\n                    onClick={() => navigate('/register')}\n                  >\n                    Registrarse\n                  </Button>\n                </>\n              )}\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n\n      <Container className=\"mt-4\">\n        <Routes>\n          {/* Rutas p煤blicas */}\n          <Route\n            path=\"/login\"\n            element={\n              isAuthenticated() ? (\n                <Navigate to=\"/\" replace />\n              ) : (\n                <Login onLogin={handleLogin} />\n              )\n            }\n          />\n          <Route\n            path=\"/register\"\n            element={\n              isAuthenticated() ? (\n                <Navigate to=\"/\" replace />\n              ) : (\n                <Register onLogin={handleLogin} />\n              )\n            }\n          />\n\n          {/* Ruta principal: cat谩logo + carrito */}\n          <Route\n            path=\"/\"\n            element={\n              <Row>\n                <Col md={8} lg={9}>\n                  <ProductList onAddToCart={handleAddToCart} />\n                </Col>\n                <Col md={4} lg={3}>\n                  <ShoppingCart\n                    cart={cart}\n                    onRemove={handleRemoveFromCart}\n                    onClear={handleClearCart}\n                    onUpdateQty={handleUpdateQty}\n                    onCheckout={goToCheckout}\n                  />\n                </Col>\n              </Row>\n            }\n          />\n\n          {/* Ruta de checkout (requiere autenticaci贸n) */}\n          <Route\n            path=\"/checkout\"\n            element={\n              <ProtectedRoute>\n                <CheckoutPage\n                  cart={cart}\n                  onBack={goBackToCatalog}\n                  onConfirm={handleConfirmPurchase}\n                />\n              </ProtectedRoute>\n            }\n          />\n\n          {/* Panel de administraci贸n (solo ADMIN) */}\n          <Route\n            path=\"/admin\"\n            element={\n              <ProtectedRoute requireRole=\"ROLE_ADMIN\">\n                <AdminPanel />\n              </ProtectedRoute>\n            }\n          />\n\n          {/* Mis 贸rdenes (requiere autenticaci贸n) */}\n          <Route\n            path=\"/mis-ordenes\"\n            element={\n              <ProtectedRoute>\n                <MisOrdenes />\n              </ProtectedRoute>\n            }\n          />\n        </Routes>\n      </Container>\n    </>\n  );\n}\n\n// Componente para mostrar las 贸rdenes del usuario\nfunction MisOrdenes() {\n  const [ordenes, setOrdenes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    loadOrdenes();\n  }, []);\n\n  const loadOrdenes = async () => {\n    try {\n      setLoading(true);\n      const data = await ordenesAPI.getMisOrdenes();\n      setOrdenes(data);\n    } catch (err) {\n      setError('Error al cargar 贸rdenes');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center p-4\">Cargando 贸rdenes...</div>;\n  }\n\n  if (error) {\n    return <div className=\"alert alert-danger\">{error}</div>;\n  }\n\n  return (\n    <div>\n      <h2 className=\"mb-4\">Mis rdenes</h2>\n      {ordenes.length === 0 ? (\n        <div className=\"alert alert-info\">No tienes 贸rdenes a煤n.</div>\n      ) : (\n        <div className=\"list-group\">\n          {ordenes.map((orden) => (\n            <div key={orden.id} className=\"list-group-item\">\n              <div className=\"d-flex justify-content-between\">\n                <div>\n                  <h5>Orden #{orden.numeroOrden}</h5>\n                  <p className=\"mb-1\">\n                    Estado: <span className=\"badge bg-info\">{orden.estado}</span>\n                  </p>\n                  <p className=\"mb-1\">\n                    Fecha: {new Date(orden.fechaCreacion).toLocaleString('es-CL')}\n                  </p>\n                </div>\n                <div className=\"text-end\">\n                  <h5>Total: ${orden.total.toLocaleString('es-CL')}</h5>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}